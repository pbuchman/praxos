# Action Configuration for IntexuraOS
# Defines reusable actions and their UI behavior for different action types.

actions:
  approve:
    endpoint:
      path: /router/actions/{actionId}/execute
      method: POST
      baseUrl: ${INTEXURAOS_ACTIONS_AGENT_URL}
    ui:
      label: Approve
      variant: success
      icon: CheckCircle
      confirmationMessage: 'This will create a research draft. Continue?'
    onSuccess:
      message: 'Research draft created!'
      linkLabel: 'View Draft →'

  retry:
    endpoint:
      path: /router/actions/{actionId}/execute
      method: POST
      baseUrl: ${INTEXURAOS_ACTIONS_AGENT_URL}
    ui:
      label: Retry
      variant: primary
      icon: Play
      confirmationMessage: 'Retry creating research draft?'
    onSuccess:
      message: 'Research draft created!'
      linkLabel: 'View Draft →'

  reject:
    endpoint:
      path: /router/actions/{actionId}
      method: PATCH
      baseUrl: ${INTEXURAOS_ACTIONS_AGENT_URL}
      body:
        status: rejected
    ui:
      label: Reject
      variant: secondary
      icon: XCircle

  archive:
    endpoint:
      path: /router/actions/{actionId}
      method: PATCH
      baseUrl: ${INTEXURAOS_ACTIONS_AGENT_URL}
      body:
        status: archived
    ui:
      label: Archive
      variant: secondary
      icon: Archive

  delete:
    endpoint:
      path: /router/actions/{actionId}
      method: DELETE
      baseUrl: ${INTEXURAOS_ACTIONS_AGENT_URL}
    ui:
      label: Delete
      variant: secondary
      icon: Trash2

types:
  research:
    actions:
      # Approve - only for awaiting_approval
      - action: approve
        when:
          field: status
          op: eq
          value: awaiting_approval

      # Retry - only for failed
      - action: retry
        when:
          field: status
          op: eq
          value: failed

      # Reject - only for awaiting_approval
      - action: reject
        when:
          field: status
          op: eq
          value: awaiting_approval

      # Archive - for completed, failed, rejected (NOT archived or awaiting_approval)
      - action: archive
        when:
          field: status
          op: in
          value: [completed, failed, rejected]

      # Delete - available for all statuses
      - action: delete
