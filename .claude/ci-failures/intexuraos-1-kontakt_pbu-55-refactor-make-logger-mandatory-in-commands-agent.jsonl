{"ts":"2026-01-15T02:51:52.169Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":1,"passed":false,"durationMs":329,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:51:58.157Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"-","runNumber":2,"passed":false,"durationMs":331,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:52:13.340Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--help","runNumber":3,"passed":false,"durationMs":326,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:52:26.280Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"calendar-agent","runNumber":4,"passed":false,"durationMs":4417,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:57:58.097Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":5,"passed":false,"durationMs":348,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:57:58.097Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":5,"passed":false,"durationMs":348,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:58:07.973Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":6,"passed":false,"durationMs":350,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T02:58:10.916Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"bookmarks-agent","runNumber":7,"passed":false,"durationMs":1826,"failureCount":1,"failures":[{"type":"typecheck","code":"TS6133","file":"src/infra/linkpreview/webAgentClient.ts","line":8,"message":"'pino' is declared but its value is never read.","snippet":null,"context":null}]}
{"ts":"2026-01-15T02:58:17.474Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"todos-agent","runNumber":7,"passed":false,"durationMs":9129,"failureCount":3,"failures":[{"type":"lint","code":"@typescript-eslint/no-unused-vars","file":"apps/bookmarks-agent/src/infra/linkpreview/webAgentClient.ts","line":8,"message":"'pino' is defined but never used. Allowed unused vars must match /^_/u","snippet":"import pino, { type Logger } from 'pino';","context":" 6:   LinkPreviewError,\n 7: } from '../../domain/ports/linkPreviewFetcher.js';\n>8: import pino, { type Logger } from 'pino';\n 9: \n 10: export interface WebAgentClientConfig {"},{"type":"lint","code":"@typescript-eslint/no-unused-vars","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":81,"message":"'mockLogger' is assigned a value but never used. Allowed unused vars must match /^_/u","snippet":"let mockLogger: {","context":" 79:   let signatureRepo: FakeSignatureConnectionRepository;\n 80:   let notificationRepo: FakeNotificationRepository;\n>81:   let mockLogger: {\n 82:     info: ReturnType<typeof vi.fn>;\n 83:     warn: ReturnType<typeof vi.fn>;"},{"type":"lint","code":"@typescript-eslint/no-unused-vars","file":"apps/whatsapp-service/src/infra/linkpreview/webAgentLinkPreviewClient.ts","line":5,"message":"'pino' is defined but never used. Allowed unused vars must match /^_/u","snippet":"import pino, { type Logger } from 'pino';","context":" 3: import type { LinkPreviewFetcherPort } from '../../domain/whatsapp/ports/linkPreviewFetcher.js';\n 4: import type { LinkPreview, LinkPreviewError } from '../../domain/whatsapp/models/LinkPreview.js';\n>5: import pino, { type Logger } from 'pino';\n 6: \n 7: export interface WebAgentLinkPreviewClientConfig {"}]}
{"ts":"2026-01-15T03:04:05.216Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":8,"passed":false,"durationMs":337,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:04:18.574Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"mobile-notifications-service","runNumber":9,"passed":false,"durationMs":1968,"failureCount":1,"failures":[{"type":"typecheck","code":"TS2379","file":"src/index.ts","line":14,"message":"Argument of type '{ dsn: string | undefined; environment: string; serviceName: string; }' is not assignable to parameter of type 'SentryConfig' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.","snippet":null,"context":null}]}
{"ts":"2026-01-15T03:07:52.192Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"mobile-notifications-service","runNumber":10,"passed":false,"durationMs":3240,"failureCount":6,"failures":[{"type":"typecheck","code":"TS2345","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":121,"message":"Argument of type '{ info: Mock<Procedure | Constructable>; warn: Mock<Procedure | Constructable>; error: Mock<Procedure | Constructable>; }' is not assignable to parameter of type 'ProcessNotificationLogger'.","snippet":"mockLogger","context":" 119:       signatureRepo,\n 120:       notificationRepo,\n>121:       mockLogger\n 122:     );\n 123: "},{"type":"typecheck","code":"TS2345","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":153,"message":"Argument of type '{ info: Mock<Procedure | Constructable>; warn: Mock<Procedure | Constructable>; error: Mock<Procedure | Constructable>; }' is not assignable to parameter of type 'ProcessNotificationLogger'.","snippet":"mockLogger","context":" 151:       signatureRepo,\n 152:       notificationRepo,\n>153:       mockLogger\n 154:     );\n 155: "},{"type":"typecheck","code":"TS2345","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":205,"message":"Argument of type '{ info: Mock<Procedure | Constructable>; warn: Mock<Procedure | Constructable>; error: Mock<Procedure | Constructable>; }' is not assignable to parameter of type 'ProcessNotificationLogger'.","snippet":"mockLogger","context":" 203:       signatureRepo,\n 204:       notificationRepo,\n>205:       mockLogger\n 206:     );\n 207: "},{"type":"typecheck","code":"TS2345","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":237,"message":"Argument of type '{ info: Mock<Procedure | Constructable>; warn: Mock<Procedure | Constructable>; error: Mock<Procedure | Constructable>; }' is not assignable to parameter of type 'ProcessNotificationLogger'.","snippet":"mockLogger","context":" 235:       signatureRepo,\n 236:       notificationRepo,\n>237:       mockLogger\n 238:     );\n 239: "},{"type":"typecheck","code":"TS2345","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":272,"message":"Argument of type '{ info: Mock<Procedure | Constructable>; warn: Mock<Procedure | Constructable>; error: Mock<Procedure | Constructable>; }' is not assignable to parameter of type 'ProcessNotificationLogger'.","snippet":"mockLogger","context":" 270:       signatureRepo,\n 271:       notificationRepo,\n>272:       mockLogger\n 273:     );\n 274: "},{"type":"typecheck","code":"TS2345","file":"apps/mobile-notifications-service/src/__tests__/usecases.test.ts","line":307,"message":"Argument of type '{ info: Mock<Procedure | Constructable>; warn: Mock<Procedure | Constructable>; error: Mock<Procedure | Constructable>; }' is not assignable to parameter of type 'ProcessNotificationLogger'.","snippet":"mockLogger","context":" 305:       signatureRepo,\n 306:       notificationRepo,\n>307:       mockLogger\n 308:     );\n 309: "}]}
{"ts":"2026-01-15T03:08:16.371Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"mobile-notifications-service","runNumber":11,"passed":false,"durationMs":6121,"failureCount":2,"failures":[{"type":"lint","code":"@typescript-eslint/no-unused-vars","file":"apps/bookmarks-agent/src/infra/linkpreview/webAgentClient.ts","line":8,"message":"'pino' is defined but never used. Allowed unused vars must match /^_/u","snippet":"import pino, { type Logger } from 'pino';","context":" 6:   LinkPreviewError,\n 7: } from '../../domain/ports/linkPreviewFetcher.js';\n>8: import pino, { type Logger } from 'pino';\n 9: \n 10: export interface WebAgentClientConfig {"},{"type":"lint","code":"@typescript-eslint/no-unused-vars","file":"apps/whatsapp-service/src/infra/linkpreview/webAgentLinkPreviewClient.ts","line":5,"message":"'pino' is defined but never used. Allowed unused vars must match /^_/u","snippet":"import pino, { type Logger } from 'pino';","context":" 3: import type { LinkPreviewFetcherPort } from '../../domain/whatsapp/ports/linkPreviewFetcher.js';\n 4: import type { LinkPreview, LinkPreviewError } from '../../domain/whatsapp/models/LinkPreview.js';\n>5: import pino, { type Logger } from 'pino';\n 6: \n 7: export interface WebAgentLinkPreviewClientConfig {"}]}
{"ts":"2026-01-15T03:09:52.220Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"mobile-notifications-service","runNumber":12,"passed":false,"durationMs":47461,"failureCount":1,"failures":[{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/openGraphFetcher.test.ts","line":0,"message":"OpenGraphFetcher > successful extraction > extracts Open Graph metadata from HTML","snippet":null,"context":null}]}
{"ts":"2026-01-15T03:12:58.901Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"mobile-notifications-service","runNumber":13,"passed":true,"durationMs":29761,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:13:42.398Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"mobile-notifications-service","runNumber":14,"passed":true,"durationMs":30720,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:20:05.913Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":15,"passed":false,"durationMs":313,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:21:02.986Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"bookmarks-agent","runNumber":16,"passed":true,"durationMs":30050,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:21:54.937Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"todos-agent","runNumber":17,"passed":true,"durationMs":32887,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:22:34.105Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"whatsapp-service","runNumber":18,"passed":true,"durationMs":30552,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T03:22:55.304Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"web-agent","runNumber":19,"passed":false,"durationMs":3458,"failureCount":4,"failures":[{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/openGraphFetcher.test.ts","line":19,"message":"Argument of type '{ info: (obj: Record<string, unknown>, msg: string) => void; warn: (obj: Record<string, unknown>, msg: string) => void; error: (obj: Record<string, unknown>, msg: string) => void; }' is not assignable to parameter of type 'Logger'.","snippet":"fetcher = new OpenGraphFetcher({ timeoutMs: 5000, maxResponseSize: 2097152 }, mockLogger);","context":" 17:   beforeAll(() => {\n 18:     nock.disableNetConnect();\n>19:     fetcher = new OpenGraphFetcher({ timeoutMs: 5000, maxResponseSize: 2097152 }, mockLogger);\n 20:   });\n 21: "},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/openGraphFetcher.test.ts","line":246,"message":"Argument of type '{ info: (obj: Record<string, unknown>, msg: string) => void; warn: (obj: Record<string, unknown>, msg: string) => void; error: (obj: Record<string, unknown>, msg: string) => void; }' is not assignable to parameter of type 'Logger'.","snippet":"const shortTimeoutFetcher = new OpenGraphFetcher({ timeoutMs: 100 }, mockLogger);","context":" 244:       vi.useFakeTimers();\n 245: \n>246:       const shortTimeoutFetcher = new OpenGraphFetcher({ timeoutMs: 100 }, mockLogger);\n 247: \n 248:       nock('https://example.com').get('/slow').delay(200).reply(200, '<html></html>');"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/openGraphFetcher.test.ts","line":270,"message":"Argument of type '{ info: (obj: Record<string, unknown>, msg: string) => void; warn: (obj: Record<string, unknown>, msg: string) => void; error: (obj: Record<string, unknown>, msg: string) => void; }' is not assignable to parameter of type 'Logger'.","snippet":"mockLogger","context":" 268:           maxResponseSize: 50,\n 269:         },\n>270:         mockLogger\n 271:       );\n 272: "},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/openGraphFetcher.test.ts","line":346,"message":"Argument of type '{ info: (obj: Record<string, unknown>, msg: string) => void; warn: (obj: Record<string, unknown>, msg: string) => void; error: (obj: Record<string, unknown>, msg: string) => void; }' is not assignable to parameter of type 'Logger'.","snippet":"mockLogger","context":" 344:           userAgent: 'CustomBot/1.0',\n 345:         },\n>346:         mockLogger\n 347:       );\n 348: "}]}
{"ts":"2026-01-15T09:06:45.017Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"web-agent","runNumber":20,"passed":true,"durationMs":76311,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T09:14:54.777Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":21,"passed":false,"durationMs":378,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T09:21:55.225Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"actions-agent","runNumber":22,"passed":false,"durationMs":3472,"failureCount":7,"failures":[{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":34,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 32:         });\n 33: \n>34:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 35:       const result = await client.createTodo({\n 36:         userId: 'user-456',"},{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":56,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 54:       nock(baseUrl).post('/internal/todos').reply(500, 'Internal Server Error');\n 55: \n>56:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 57:       const result = await client.createTodo({\n 58:         userId: 'user-456',"},{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":75,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 73:       nock(baseUrl).post('/internal/todos').reply(401, { error: 'Unauthorized' });\n 74: \n>75:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 76:       const result = await client.createTodo({\n 77:         userId: 'user-456',"},{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":99,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 97:         });\n 98: \n>99:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 100:       const result = await client.createTodo({\n 101:         userId: 'user-456',"},{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":118,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 116:       nock(baseUrl).post('/internal/todos').reply(200, { success: true });\n 117: \n>118:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 119:       const result = await client.createTodo({\n 120:         userId: 'user-456',"},{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":137,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 135:       nock(baseUrl).post('/internal/todos').replyWithError('Connection refused');\n 136: \n>137:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 138:       const result = await client.createTodo({\n 139:         userId: 'user-456',"},{"type":"typecheck","code":"TS2304","file":"apps/actions-agent/src/__tests__/infra/http/todosServiceHttpClient.test.ts","line":173,"message":"Cannot find name 'silentLogger'.","snippet":"const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });","context":" 171:         });\n 172: \n>173:       const client = createTodosServiceHttpClient({ baseUrl, internalAuthToken, logger: silentLogger });\n 174:       await client.createTodo({\n 175:         userId: 'user-456',"}]}
{"ts":"2026-01-15T09:22:42.769Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"actions-agent","runNumber":23,"passed":true,"durationMs":30922,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T09:27:21.151Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":24,"passed":false,"durationMs":320,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T09:27:33.207Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"llm-pricing","runNumber":25,"passed":false,"durationMs":1217,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T09:28:06.096Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":26,"passed":false,"durationMs":357,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T09:29:51.595Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","workspace":"--","runNumber":27,"passed":false,"durationMs":384,"failureCount":0,"failures":[]}
{"ts":"2026-01-15T10:17:36.357Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","runNumber":28,"passed":false,"durationMs":60235,"failureCount":93,"failures":[{"type":"typecheck","code":"TS2353","file":"apps/commands-agent/src/infra/user/userServiceClient.ts","line":207,"message":"Object literal may only specify known properties, and 'logger' does not exist in type 'LlmClientConfig'.","snippet":"logger: config.logger,","context":" 205:           userId,\n 206:           pricing,\n>207:           logger: config.logger,\n 208:         };\n 209: "},{"type":"typecheck","code":"TS2554","file":"apps/image-service/src/routes/internalRoutes.ts","line":95,"message":"Expected 3 arguments, but got 4.","snippet":"const generator = createPromptGenerator(modelConfig.provider, apiKey, userId, request.log);","context":" 93: \n 94:       request.log.info({ model, provider: modelConfig.provider }, 'Starting prompt generation');\n>95:       const generator = createPromptGenerator(modelConfig.provider, apiKey, userId, request.log);\n 96:       const result = await generator.generateThumbnailPrompt(text);\n 97: "},{"type":"typecheck","code":"TS2322","file":"apps/notion-service/src/services.ts","line":121,"message":"Type 'NotionLogger | undefined' is not assignable to type 'NotionLogger'.","snippet":"logger,","context":" 119:   const logger = services.logger;\n 120:   container = {\n>121:     logger,\n 122:     connectionRepository: services.connectionRepository ?? createConnectionRepository(),\n 123:     notionApi: services.notionApi ?? createNotionApiAdapter(logger),"},{"type":"typecheck","code":"TS2345","file":"apps/notion-service/src/services.ts","line":123,"message":"Argument of type 'NotionLogger | undefined' is not assignable to parameter of type 'NotionLogger'.","snippet":"notionApi: services.notionApi ?? createNotionApiAdapter(logger),","context":" 121:     logger,\n 122:     connectionRepository: services.connectionRepository ?? createConnectionRepository(),\n>123:     notionApi: services.notionApi ?? createNotionApiAdapter(logger),\n 124:   };\n 125: }"},{"type":"typecheck","code":"TS2345","file":"apps/promptvault-service/src/services.ts","line":170,"message":"Argument of type 'NotionLogger | undefined' is not assignable to parameter of type 'NotionLogger'.","snippet":"getPageWithPreview: async (token, pageId) => await getPageWithPreviewFn(token, pageId, logger),","context":" 168: \n 169:   const notionPageClient: NotionPageClient = services.notionPageClient ?? {\n>170:     getPageWithPreview: async (token, pageId) => await getPageWithPreviewFn(token, pageId, logger),\n 171:   };\n 172: "},{"type":"typecheck","code":"TS2322","file":"apps/promptvault-service/src/services.ts","line":174,"message":"Type 'NotionLogger | undefined' is not assignable to type 'NotionLogger'.","snippet":"logger,","context":" 172: \n 173:   container = {\n>174:     logger,\n 175:     notionServiceClient,\n 176:     notionPageClient,"},{"type":"typecheck","code":"TS2345","file":"apps/promptvault-service/src/services.ts","line":179,"message":"Argument of type 'NotionLogger | undefined' is not assignable to parameter of type 'NotionLogger'.","snippet":"createPromptRepository(notionServiceClient, promptVaultSettings, logger),","context":" 177:     promptRepository:\n 178:       services.promptRepository ??\n>179:       createPromptRepository(notionServiceClient, promptVaultSettings, logger),\n 180:     promptVaultSettings,\n 181:   };"},{"type":"typecheck","code":"TS2741","file":"apps/research-agent/src/__tests__/domain/research/usecases/retryFromFailed.test.ts","line":62,"message":"Property 'logger' is missing in type '{ synthesizer: { synthesize: Mock<Procedure>; generateTitle: Mock<Procedure>; }; notificationSender: { sendResearchComplete: Mock<Procedure>; sendLlmFailure: Mock<...>; }; ... 4 more ...; webAppUrl: string; }' but required in type 'Omit<RunSynthesisDeps, \"researchRepo\">'.","snippet":"synthesisDeps: {","context":" 60:     researchRepo: mockRepo,\n 61:     llmCallPublisher: mockPublisher,\n>62:     synthesisDeps: {\n 63:       synthesizer: mockSynthesizer,\n 64:       notificationSender: mockNotificationSender,"},{"type":"typecheck","code":"TS2322","file":"apps/research-agent/src/__tests__/domain/research/usecases/runSynthesis.test.ts","line":59,"message":"Type '{ researchRepo: { findById: Mock<Procedure>; save: Mock<Procedure>; update: Mock<Procedure>; updateLlmResult: Mock<Procedure>; findByUserId: Mock<...>; clearShareInfo: Mock<...>; delete: Mock<...>; }; ... 11 more ...; mockReportSuccess: Mock<...>; }' is not assignable to type 'RunSynthesisDeps & { mockRepo: { findById: Mock<Procedure | Constructable>; update: Mock<Procedure | Constructable>; }; mockSynthesizer: { ...; }; mockNotificationSender: { ...; }; mockReportSuccess: Mock<...>; }'.","snippet":"return {","context":" 57:   const mockReportSuccess = vi.fn();\n 58: \n>59:   return {\n 60:     researchRepo: mockRepo,\n 61:     synthesizer: mockSynthesizer,"},{"type":"typecheck","code":"TS2741","file":"apps/research-agent/src/__tests__/domain/research/usecases/runSynthesis.test.ts","line":307,"message":"Property 'logger' is missing in type '{ researchRepo: ResearchRepository; synthesizer: LlmSynthesisProvider; notificationSender: NotificationSender; ... 4 more ...; webAppUrl: string; }' but required in type 'RunSynthesisDeps'.","snippet":"const minimalDeps: RunSynthesisDeps = {","context":" 305:     deps.mockRepo.findById.mockResolvedValue(ok(research));\n 306: \n>307:     const minimalDeps: RunSynthesisDeps = {\n 308:       researchRepo: deps.researchRepo,\n 309:       synthesizer: deps.synthesizer,"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/ClaudeAdapter.test.ts","line":30,"message":"Expected 5 arguments, but got 4.","snippet":"adapter = new ClaudeAdapter('test-key', LlmModels.ClaudeOpus45, 'test-user-id', testPricing);","context":" 28:   beforeEach(() => {\n 29:     vi.clearAllMocks();\n>30:     adapter = new ClaudeAdapter('test-key', LlmModels.ClaudeOpus45, 'test-user-id', testPricing);\n 31:   });\n 32: "},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/ClaudeAdapter.test.ts","line":36,"message":"Expected 5 arguments, but got 4.","snippet":"new ClaudeAdapter('test-key', LlmModels.ClaudeOpus45, 'test-user-id', testPricing);","context":" 34:     it('passes apiKey and model to client', () => {\n 35:       mockCreateClaudeClient.mockClear();\n>36:       new ClaudeAdapter('test-key', LlmModels.ClaudeOpus45, 'test-user-id', testPricing);\n 37: \n 38:       expect(mockCreateClaudeClient).toHaveBeenCalledWith({"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GeminiAdapter.test.ts","line":34,"message":"Expected 5 arguments, but got 4.","snippet":"adapter = new GeminiAdapter('test-key', LlmModels.Gemini25Pro, 'test-user-id', testPricing);","context":" 32:   beforeEach(() => {\n 33:     vi.clearAllMocks();\n>34:     adapter = new GeminiAdapter('test-key', LlmModels.Gemini25Pro, 'test-user-id', testPricing);\n 35:   });\n 36: "},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GeminiAdapter.test.ts","line":40,"message":"Expected 5 arguments, but got 4.","snippet":"new GeminiAdapter('test-key', LlmModels.Gemini25Pro, 'test-user-id', testPricing);","context":" 38:     it('passes apiKey and model to client', () => {\n 39:       mockCreateGeminiClient.mockClear();\n>40:       new GeminiAdapter('test-key', LlmModels.Gemini25Pro, 'test-user-id', testPricing);\n 41: \n 42:       expect(mockCreateGeminiClient).toHaveBeenCalledWith({"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GeminiAdapter.test.ts","line":51,"message":"Expected 5 arguments, but got 4.","snippet":"const testAdapter = new GeminiAdapter(","context":" 49: \n 50:     it('creates adapter successfully', () => {\n>51:       const testAdapter = new GeminiAdapter(\n 52:         'test-key',\n 53:         LlmModels.Gemini25Pro,"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":53,"message":"Expected 5 arguments, but got 4.","snippet":"adapter = new GlmAdapter('test-key', LlmModels.Glm47, 'test-user-id', testPricing);","context":" 51:   beforeEach(() => {\n 52:     vi.clearAllMocks();\n>53:     adapter = new GlmAdapter('test-key', LlmModels.Glm47, 'test-user-id', testPricing);\n 54:   });\n 55: "},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":59,"message":"Expected 5 arguments, but got 4.","snippet":"new GlmAdapter('test-key', LlmModels.Glm47, 'test-user-id', testPricing);","context":" 57:     it('passes apiKey and model to client', () => {\n 58:       mockCreateGlmClient.mockClear();\n>59:       new GlmAdapter('test-key', LlmModels.Glm47, 'test-user-id', testPricing);\n 60: \n 61:       expect(mockCreateGlmClient).toHaveBeenCalledWith({"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GptAdapter.test.ts","line":32,"message":"Expected 5 arguments, but got 4.","snippet":"adapter = new GptAdapter('test-key', LlmModels.O4MiniDeepResearch, 'test-user-id', testPricing);","context":" 30:   beforeEach(() => {\n 31:     vi.clearAllMocks();\n>32:     adapter = new GptAdapter('test-key', LlmModels.O4MiniDeepResearch, 'test-user-id', testPricing);\n 33:   });\n 34: "},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/GptAdapter.test.ts","line":38,"message":"Expected 5 arguments, but got 4.","snippet":"new GptAdapter('test-key', LlmModels.O4MiniDeepResearch, 'test-user-id', testPricing);","context":" 36:     it('passes apiKey and model to client', () => {\n 37:       mockCreateGptClient.mockClear();\n>38:       new GptAdapter('test-key', LlmModels.O4MiniDeepResearch, 'test-user-id', testPricing);\n 39: \n 40:       expect(mockCreateGptClient).toHaveBeenCalledWith({"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/InputValidationAdapter.test.ts","line":19,"message":"Expected 5 arguments, but got 4.","snippet":"new InputValidationAdapter(","context":" 17: \n 18:   const createAdapter = (): InputValidationAdapter =>\n>19:     new InputValidationAdapter(\n 20:       'test-api-key',\n 21:       LlmModels.Gemini25Flash,"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":82,"message":"Expected 5 arguments, but got 4.","snippet":"const provider = createResearchProvider(","context":" 80:   describe('createResearchProvider', () => {\n 81:     it('creates GeminiAdapter for gemini model', () => {\n>82:       const provider = createResearchProvider(\n 83:         LlmModels.Gemini25Pro,\n 84:         'google-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":94,"message":"Expected 5 arguments, but got 4.","snippet":"const provider = createResearchProvider(","context":" 92: \n 93:     it('creates ClaudeAdapter for claude model', () => {\n>94:       const provider = createResearchProvider(\n 95:         LlmModels.ClaudeOpus45,\n 96:         'anthropic-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":106,"message":"Expected 5 arguments, but got 4.","snippet":"const provider = createResearchProvider(","context":" 104: \n 105:     it('creates GptAdapter for openai model', () => {\n>106:       const provider = createResearchProvider(\n 107:         LlmModels.O4MiniDeepResearch,\n 108:         'openai-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":118,"message":"Expected 5 arguments, but got 4.","snippet":"const provider = createResearchProvider(","context":" 116: \n 117:     it('creates PerplexityAdapter for perplexity model', () => {\n>118:       const provider = createResearchProvider(\n 119:         LlmModels.SonarPro,\n 120:         'perplexity-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":130,"message":"Expected 5 arguments, but got 4.","snippet":"const provider = createResearchProvider(","context":" 128: \n 129:     it('creates GlmAdapter for zai model', () => {\n>130:       const provider = createResearchProvider(\n 131:         LlmModels.Glm47,\n 132:         'zai-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":144,"message":"Expected 5 arguments, but got 4.","snippet":"const synthesizer = createSynthesizer(","context":" 142:   describe('createSynthesizer', () => {\n 143:     it('creates GeminiAdapter for gemini model', () => {\n>144:       const synthesizer = createSynthesizer(\n 145:         LlmModels.Gemini25Pro,\n 146:         'google-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":157,"message":"Expected 5 arguments, but got 4.","snippet":"createSynthesizer(LlmModels.ClaudeOpus45, 'anthropic-key', 'test-user-id', testPricing)","context":" 155:     it('throws error for claude model (synthesis not supported)', () => {\n 156:       expect(() =>\n>157:         createSynthesizer(LlmModels.ClaudeOpus45, 'anthropic-key', 'test-user-id', testPricing)\n 158:       ).toThrow('Anthropic does not support synthesis');\n 159:     });"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":162,"message":"Expected 5 arguments, but got 4.","snippet":"const synthesizer = createSynthesizer(","context":" 160: \n 161:     it('creates GptAdapter for openai model', () => {\n>162:       const synthesizer = createSynthesizer(\n 163:         LlmModels.O4MiniDeepResearch,\n 164:         'openai-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":177,"message":"Expected 5 arguments, but got 4.","snippet":"createSynthesizer(LlmModels.SonarPro, 'perplexity-key', 'test-user-id', testPricing)","context":" 175:     it('throws error for perplexity model (synthesis not supported)', () => {\n 176:       expect(() =>\n>177:         createSynthesizer(LlmModels.SonarPro, 'perplexity-key', 'test-user-id', testPricing)\n 178:       ).toThrow('Perplexity does not support synthesis');\n 179:     });"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":182,"message":"Expected 5 arguments, but got 4.","snippet":"const synthesizer = createSynthesizer(","context":" 180: \n 181:     it('creates GlmAdapter for zai model', () => {\n>182:       const synthesizer = createSynthesizer(\n 183:         LlmModels.Glm47,\n 184:         'zai-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":196,"message":"Expected 5 arguments, but got 4.","snippet":"const generator = createTitleGenerator(","context":" 194:   describe('createTitleGenerator', () => {\n 195:     it('creates GeminiAdapter for title generation', () => {\n>196:       const generator = createTitleGenerator(\n 197:         LlmModels.Gemini20Flash,\n 198:         'google-key',"},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/PerplexityAdapter.test.ts","line":27,"message":"Expected 5 arguments, but got 4.","snippet":"adapter = new PerplexityAdapter('test-key', LlmModels.SonarPro, 'test-user-id', testPricing);","context":" 25:   beforeEach(() => {\n 26:     vi.clearAllMocks();\n>27:     adapter = new PerplexityAdapter('test-key', LlmModels.SonarPro, 'test-user-id', testPricing);\n 28:   });\n 29: "},{"type":"typecheck","code":"TS2554","file":"apps/research-agent/src/__tests__/infra/llm/PerplexityAdapter.test.ts","line":33,"message":"Expected 5 arguments, but got 4.","snippet":"new PerplexityAdapter('test-key', LlmModels.SonarPro, 'test-user-id', testPricing);","context":" 31:     it('passes apiKey and model to client', () => {\n 32:       mockCreatePerplexityClient.mockClear();\n>33:       new PerplexityAdapter('test-key', LlmModels.SonarPro, 'test-user-id', testPricing);\n 34: \n 35:       expect(mockCreatePerplexityClient).toHaveBeenCalledWith({"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":72,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.1] Loading research from database');","context":" 70:   } = deps;\n 71: \n>72:   logger.info('[4.1] Loading research from database');\n 73:   const researchResult = await researchRepo.findById(researchId);\n 74:   if (!researchResult.ok || researchResult.value === null) {"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":84,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.1] Research already processing or completed, skipping synthesis');","context":" 82:   // return early to prevent duplicate notifications\n 83:   if (research.status === 'synthesizing' || research.status === 'completed') {\n>84:     logger.info('[4.1] Research already processing or completed, skipping synthesis');\n 85:     return { ok: true };\n 86:   }"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":88,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.1.1] Updating status to synthesizing');","context":" 86:   }\n 87: \n>88:   logger.info('[4.1.1] Updating status to synthesizing');\n 89:   await researchRepo.update(researchId, { status: 'synthesizing' });\n 90: "},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":107,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.1.2] Single result, skipping synthesis');","context":" 105: \n 106:   if (shouldSkipSynthesis) {\n>107:     logger.info('[4.1.2] Single result, skipping synthesis');\n 108:     const now = new Date();\n 109:     const startedAt = new Date(research.startedAt);"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":145,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.2.1] Starting synthesis context inference');","context":" 143: \n 144:   if (contextInferrer !== undefined) {\n>145:     logger.info('[4.2.1] Starting synthesis context inference');\n 146:     const contextResult = await contextInferrer.inferSynthesisContext({\n 147:       originalPrompt: research.prompt,"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":155,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"`[4.2.2] Synthesis context inferred successfully (costUsd: ${String(contextResult.value.usage.costUsd)})`","context":" 153:       additionalCostUsd += contextResult.value.usage.costUsd ?? 0;\n 154:       logger.info(\n>155:         `[4.2.2] Synthesis context inferred successfully (costUsd: ${String(contextResult.value.usage.costUsd)})`\n 156:       );\n 157:     } else {"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":173,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info(`[4.3.1] Starting synthesis LLM call (${String(reports.length)} reports)`);","context":" 171:   }\n 172: \n>173:   logger.info(`[4.3.1] Starting synthesis LLM call (${String(reports.length)} reports)`);\n 174:   const synthesisResult = await synthesizer.synthesize(\n 175:     research.prompt,"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":194,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info(`[4.3.2] Synthesis LLM call succeeded (${String(synthesisContent.length)} chars)`);","context":" 192:   const synthesisUsage = synthesisResult.value.usage;\n 193: \n>194:   logger.info(`[4.3.2] Synthesis LLM call succeeded (${String(synthesisContent.length)} chars)`);\n 195: \n 196:   // [4.3.3] Post-process synthesis for attribution"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":197,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.3.3] Starting attribution post-processing');","context":" 195: \n 196:   // [4.3.3] Post-process synthesis for attribution\n>197:   logger.info('[4.3.3] Starting attribution post-processing');\n 198: \n 199:   const sourceMap = buildSourceMap(reports, additionalSources);"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":207,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.3.3a] Attribution validation passed');","context":" 205:   if (validation.valid) {\n 206:     attributionStatus = 'complete';\n>207:     logger.info('[4.3.3a] Attribution validation passed');\n 208:   } else {\n 209:     logger.info(`[4.3.3b] Attribution validation failed: ${validation.errors.join(', ')}`);"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":209,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info(`[4.3.3b] Attribution validation failed: ${validation.errors.join(', ')}`);","context":" 207:     logger.info('[4.3.3a] Attribution validation passed');\n 208:   } else {\n>209:     logger.info(`[4.3.3b] Attribution validation failed: ${validation.errors.join(', ')}`);\n 210: \n 211:     const repairResult = await repairAttribution(synthesisContent, sourceMap, {"},{"type":"typecheck","code":"TS2322","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":213,"message":"Type 'Logger' is not assignable to type '{ info: (msg: string) => void; error: (obj: object, msg: string) => void; }'.","snippet":"logger,","context":" 211:     const repairResult = await repairAttribution(synthesisContent, sourceMap, {\n 212:       synthesizer,\n>213:       logger,\n 214:     });\n 215: "},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":223,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"`[4.3.3c] Attribution repair succeeded (costUsd: ${String(repairResult.value.usage.costUsd)})`","context":" 221:         additionalCostUsd += repairResult.value.usage.costUsd ?? 0;\n 222:         logger.info(\n>223:           `[4.3.3c] Attribution repair succeeded (costUsd: ${String(repairResult.value.usage.costUsd)})`\n 224:         );\n 225:       } else {"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":227,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.3.3c] Attribution repair did not fix all issues');","context":" 225:       } else {\n 226:         additionalCostUsd += repairResult.value.usage.costUsd ?? 0;\n>227:         logger.info('[4.3.3c] Attribution repair did not fix all issues');\n 228:       }\n 229:     } else {"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":230,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.3.3c] Attribution repair failed');","context":" 228:       }\n 229:     } else {\n>230:       logger.info('[4.3.3c] Attribution repair failed');\n 231:     }\n 232:   }"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":238,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info(`[4.3.4] Attribution status: ${attributionStatus}`);","context":" 236:   processedContent = `${processedContent}\\n\\n${breakdown}`;\n 237: \n>238:   logger.info(`[4.3.4] Attribution status: ${attributionStatus}`);\n 239: \n 240:   // Calculate aggregate totals from all LLM results + synthesis"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":267,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"`[4.3.5] Aggregate usage: inputTokens=${String(totalInputTokens)}, outputTokens=${String(totalOutputTokens)}, costUsd=${totalCostUsd.toFixed(6)} (llm=${llmTotals.costUsd.toFixed(6)}, synth=${(synthesisUsage?.costUsd ?? 0).toFixed(6)}, aux=${(research.auxiliaryCostUsd ?? 0).toFixed(6)}, source=${(research.sourceLlmCostUsd ?? 0).toFixed(6)}, add=${additionalCostUsd.toFixed(6)})`","context":" 265: \n 266:   logger.info(\n>267:     `[4.3.5] Aggregate usage: inputTokens=${String(totalInputTokens)}, outputTokens=${String(totalOutputTokens)}, costUsd=${totalCostUsd.toFixed(6)} (llm=${llmTotals.costUsd.toFixed(6)}, synth=${(synthesisUsage?.costUsd ?? 0).toFixed(6)}, aux=${(research.auxiliaryCostUsd ?? 0).toFixed(6)}, source=${(research.sourceLlmCostUsd ?? 0).toFixed(6)}, add=${additionalCostUsd.toFixed(6)})`\n 268:   );\n 269: "},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":278,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.4.1] Starting cover image generation');","context":" 276: \n 277:   if (imageServiceClient !== null) {\n>278:     logger.info('[4.4.1] Starting cover image generation');\n 279:     const imageResult = await generateCoverImage(\n 280:       imageServiceClient,"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":294,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info(`[4.4.4] Cover image generation completed (id: ${imageResult.id})`);","context":" 292:       };\n 293:       coverImageId = imageResult.id;\n>294:       logger.info(`[4.4.4] Cover image generation completed (id: ${imageResult.id})`);\n 295:     } else {\n 296:       logger.info('[4.4.4] Cover image generation returned null (see previous errors)');"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":296,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.4.4] Cover image generation returned null (see previous errors)');","context":" 294:       logger.info(`[4.4.4] Cover image generation completed (id: ${imageResult.id})`);\n 295:     } else {\n>296:       logger.info('[4.4.4] Cover image generation returned null (see previous errors)');\n 297:     }\n 298:   } else {"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":299,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.4] Skipping cover image generation (imageServiceClient is null)');","context":" 297:     }\n 298:   } else {\n>299:     logger.info('[4.4] Skipping cover image generation (imageServiceClient is null)');\n 300:   }\n 301: "},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":306,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.5.1] Generating shareable HTML');","context":" 304: \n 305:   if (shareStorage !== null && shareConfig !== null) {\n>306:     logger.info('[4.5.1] Generating shareable HTML');\n 307:     const shareToken = generateShareToken();\n 308:     const slug = slugify(research.title);"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":324,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.5.2] Uploading HTML to GCS');","context":" 322:     });\n 323: \n>324:     logger.info('[4.5.2] Uploading HTML to GCS');\n 325:     const uploadResult = await shareStorage.upload(fileName, html);\n 326:     if (uploadResult.ok) {"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":335,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info(`[4.5.3] HTML uploaded successfully (path: ${uploadResult.value.gcsPath})`);","context":" 333:         ...(coverImageId !== undefined && { coverImageId }),\n 334:       };\n>335:       logger.info(`[4.5.3] HTML uploaded successfully (path: ${uploadResult.value.gcsPath})`);\n 336:     } else {\n 337:       logger.error({}, '[4.5.3] HTML upload failed');"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":341,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.6] Saving final research result to database');","context":" 339:   }\n 340: \n>341:   logger.info('[4.6] Saving final research result to database');\n 342:   await researchRepo.update(researchId, {\n 343:     status: 'completed',"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":358,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"logger.info('[4.7] Sending completion notification');","context":" 356:   }\n 357: \n>358:   logger.info('[4.7] Sending completion notification');\n 359:   void notificationSender.sendResearchComplete(\n 360:     research.userId,"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":410,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"'[4.4.1a] No API keys available for image generation (neither Google nor OpenAI key set)'","context":" 408:   if (imageModel === null) {\n 409:     logger.info(\n>410:       '[4.4.1a] No API keys available for image generation (neither Google nor OpenAI key set)'\n 411:     );\n 412:     return null;"},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":416,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"`[4.4.1b] Selected image model: ${imageModel} (Google key: ${imageApiKeys?.google !== undefined ? 'present' : 'missing'}, OpenAI key: ${imageApiKeys?.openai !== undefined ? 'present' : 'missing'})`","context":" 414: \n 415:   logger.info(\n>416:     `[4.4.1b] Selected image model: ${imageModel} (Google key: ${imageApiKeys?.google !== undefined ? 'present' : 'missing'}, OpenAI key: ${imageApiKeys?.openai !== undefined ? 'present' : 'missing'})`\n 417:   );\n 418: "},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":421,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"`[4.4.2] Calling image-service /internal/images/prompts/generate (model: ${promptModel})`","context":" 419:   try {\n 420:     logger.info(\n>421:       `[4.4.2] Calling image-service /internal/images/prompts/generate (model: ${promptModel})`\n 422:     );\n 423: "},{"type":"typecheck","code":"TS2345","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":439,"message":"Argument of type 'string' is not assignable to parameter of type 'object'.","snippet":"`[4.4.3] Prompt generated (title: ${promptResult.value.title}), calling image-service /internal/images/generate (model: ${imageModel})`","context":" 437: \n 438:     logger.info(\n>439:       `[4.4.3] Prompt generated (title: ${promptResult.value.title}), calling image-service /internal/images/generate (model: ${imageModel})`\n 440:     );\n 441: "},{"type":"typecheck","code":"TS2322","file":"apps/research-agent/src/routes/helpers/completionHandlers.ts","line":111,"message":"Type '(msg: string) => void' is not assignable to type '(obj: object, msg?: string | undefined) => void'.","snippet":"info: (msg: string): void => {","context":" 109:     },\n 110:     logger: {\n>111:       info: (msg: string): void => {\n 112:         logger.info({ researchId }, msg);\n 113:       },"},{"type":"typecheck","code":"TS2322","file":"apps/research-agent/src/routes/internalRoutes.ts","line":358,"message":"Type '(msg: string) => void' is not assignable to type '(obj: object, msg?: string | undefined) => void'.","snippet":"info: (msg: string): void => {","context":" 356:             },\n 357:             logger: {\n>358:               info: (msg: string): void => {\n 359:                 request.log.info({ researchId: event.researchId }, msg);\n 360:               },"},{"type":"typecheck","code":"TS2322","file":"apps/research-agent/src/routes/researchRoutes.ts","line":810,"message":"Type '(msg: string) => void' is not assignable to type '(obj: object, msg?: string | undefined) => void'.","snippet":"info: (msg: string): void => {","context":" 808:             },\n 809:             logger: {\n>810:               info: (msg: string): void => {\n 811:                 request.log.info({ researchId: id }, msg);\n 812:               },"},{"type":"typecheck","code":"TS2741","file":"apps/research-agent/src/routes/researchRoutes.ts","line":940,"message":"Property 'logger' is missing in type '{ notificationSender: NotificationSender; shareStorage: ShareStoragePort | null; shareConfig: ShareConfig | null; imageServiceClient: ImageServiceClient | null; ... 5 more ...; synthesizer: LlmSynthesisProvider; }' but required in type 'Omit<RunSynthesisDeps, \"researchRepo\">'.","snippet":"synthesisDeps: {","context":" 938:         researchRepo,\n 939:         llmCallPublisher,\n>940:         synthesisDeps: {\n 941:           synthesizer,\n 942:           ...(contextInferrer !== undefined && { contextInferrer }),"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":98,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 96:       mockGenerate.mockResolvedValue(ok({ content: validResponse, usage: mockUsage }));\n 97:       mockUserServiceClient = createMockUserServiceClient('ok');\n>98:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 99: \n 100:       const result = await service.extractItems('user-123', 'Buy groceries and call mom');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":116,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 114:     it('returns NO_API_KEY error when user has no API key', async () => {\n 115:       mockUserServiceClient = createMockUserServiceClient('no_api_key');\n>116:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 117: \n 118:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":129,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 127:     it('returns USER_SERVICE_ERROR when user service fails with API_ERROR', async () => {\n 128:       mockUserServiceClient = createMockUserServiceClient('api_error');\n>129:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 130: \n 131:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":143,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 141:     it('returns USER_SERVICE_ERROR when user service fails with NETWORK_ERROR', async () => {\n 142:       mockUserServiceClient = createMockUserServiceClient('network_error');\n>143:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 144: \n 145:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":158,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 156:       mockGenerate.mockResolvedValue(err({ code: 'RATE_LIMIT_EXCEEDED', message: 'Rate limit exceeded' }));\n 157:       mockUserServiceClient = createMockUserServiceClient('ok');\n>158:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 159: \n 160:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":173,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 171:       mockGenerate.mockResolvedValue(ok({ content: 'not valid json', usage: mockUsage }));\n 172:       mockUserServiceClient = createMockUserServiceClient('ok');\n>173:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 174: \n 175:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":194,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 192:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 193:       mockUserServiceClient = createMockUserServiceClient('ok');\n>194:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 195: \n 196:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":214,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 212:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 213:       mockUserServiceClient = createMockUserServiceClient('ok');\n>214:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 215: \n 216:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":239,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 237:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 238:       mockUserServiceClient = createMockUserServiceClient('ok');\n>239:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 240: \n 241:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":264,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 262:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 263:       mockUserServiceClient = createMockUserServiceClient('ok');\n>264:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 265: \n 266:       const result = await service.extractItems('user-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":282,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 280:       mockGenerate.mockResolvedValue(ok({ content: validResponse, usage: mockUsage }));\n 281:       mockUserServiceClient = createMockUserServiceClient('ok');\n>282:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 283: \n 284:       const result = await service.extractItems('user-123', 'No actionable items here');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":307,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 305:       mockGenerate.mockResolvedValue(ok({ content: validResponse, usage: mockUsage }));\n 306:       mockUserServiceClient = createMockUserServiceClient('ok');\n>307:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 308: \n 309:       const result = await service.extractItems('user-123', 'Many tasks');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":338,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 336:       mockGenerate.mockResolvedValue(ok({ content: validResponse, usage: mockUsage }));\n 337:       mockUserServiceClient = createMockUserServiceClient('ok');\n>338:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 339: \n 340:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":364,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 362:       mockGenerate.mockResolvedValue(ok({ content: validResponse, usage: mockUsage }));\n 363:       mockUserServiceClient = createMockUserServiceClient('ok');\n>364:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 365: \n 366:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":382,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 380:       );\n 381:       mockUserServiceClient = createMockUserServiceClient('ok');\n>382:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 383: \n 384:       await service.extractItems('user-abc-123', 'Test description');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":397,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 395:       );\n 396:       mockUserServiceClient = createMockUserServiceClient('ok');\n>397:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 398: \n 399:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":425,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 423:       mockGenerate.mockResolvedValue(ok({ content: responseWithMarkdown, usage: mockUsage }));\n 424:       mockUserServiceClient = createMockUserServiceClient('ok');\n>425:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 426: \n 427:       const result = await service.extractItems('user-123', 'Buy milk');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":444,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 442:       mockGenerate.mockResolvedValue(ok({ content: invalidResponseWithMarkdown, usage: mockUsage }));\n 443:       mockUserServiceClient = createMockUserServiceClient('ok');\n>444:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 445: \n 446:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":467,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 465:       mockGenerate.mockResolvedValue(ok({ content: invalidSchemaWithMarkdown, usage: mockUsage }));\n 466:       mockUserServiceClient = createMockUserServiceClient('ok');\n>467:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 468: \n 469:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":487,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 485:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 486:       mockUserServiceClient = createMockUserServiceClient('ok');\n>487:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 488: \n 489:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":505,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 503:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 504:       mockUserServiceClient = createMockUserServiceClient('ok');\n>505:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 506: \n 507:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":523,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 521:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 522:       mockUserServiceClient = createMockUserServiceClient('ok');\n>523:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 524: \n 525:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":541,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 539:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 540:       mockUserServiceClient = createMockUserServiceClient('ok');\n>541:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 542: \n 543:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":559,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 557:       mockGenerate.mockResolvedValue(ok({ content: invalidResponse, usage: mockUsage }));\n 558:       mockUserServiceClient = createMockUserServiceClient('ok');\n>559:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 560: \n 561:       const result = await service.extractItems('user-123', 'Test');"},{"type":"typecheck","code":"TS2554","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":572,"message":"Expected 2 arguments, but got 1.","snippet":"const service = createTodoItemExtractionService(mockUserServiceClient);","context":" 570:       mockGenerate.mockResolvedValue(ok({ content: '[\"not\", \"an\", \"object\"]', usage: mockUsage }));\n 571:       mockUserServiceClient = createMockUserServiceClient('ok');\n>572:       const service = createTodoItemExtractionService(mockUserServiceClient);\n 573: \n 574:       const result = await service.extractItems('user-123', 'Test');"},{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
{"ts":"2026-01-15T10:31:17.411Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","runNumber":29,"passed":false,"durationMs":76033,"failureCount":23,"failures":[{"type":"typecheck","code":"TS2353","file":"apps/commands-agent/src/infra/user/userServiceClient.ts","line":207,"message":"Object literal may only specify known properties, and 'logger' does not exist in type 'LlmClientConfig'.","snippet":"logger: config.logger,","context":" 205:           userId,\n 206:           pricing,\n>207:           logger: config.logger,\n 208:         };\n 209: "},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/domain/research/usecases/retryFromFailed.test.ts","line":8,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { LlmModels, LlmProviders, type Logger } from '@intexuraos/llm-contract';","context":" 6: import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest';\n 7: import { ok, err } from '@intexuraos/common-core';\n>8: import { LlmModels, LlmProviders, type Logger } from '@intexuraos/llm-contract';\n 9: import {\n 10:   retryFromFailed,"},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/domain/research/usecases/runSynthesis.test.ts","line":9,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { LlmModels, LlmProviders, type Logger } from '@intexuraos/llm-contract';","context":" 7: import { ok, err } from '@intexuraos/common-core';\n 8: import type { SynthesisContext } from '@intexuraos/llm-common';\n>9: import { LlmModels, LlmProviders, type Logger } from '@intexuraos/llm-contract';\n 10: import {\n 11:   runSynthesis,"},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/ClaudeAdapter.test.ts","line":6,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';","context":" 4: \n 5: import { beforeEach, describe, expect, it, vi } from 'vitest';\n>6: import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';\n 7: \n 8: const mockResearch = vi.fn();"},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/GeminiAdapter.test.ts","line":6,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';","context":" 4: \n 5: import { beforeEach, describe, expect, it, vi } from 'vitest';\n>6: import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';\n 7: \n 8: const mockResearch = vi.fn();"},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":6,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import type { ModelPricing, Logger } from '@intexuraos/llm-contract';","context":" 4: \n 5: import { beforeEach, describe, expect, it, vi } from 'vitest';\n>6: import type { ModelPricing, Logger } from '@intexuraos/llm-contract';\n 7: import { LlmModels } from '@intexuraos/llm-contract';\n 8: "},{"type":"typecheck","code":"TS2304","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":217,"message":"Cannot find name 'createMockLogger'.","snippet":"const mockLogger = createMockLogger();","context":" 215: \n 216:     it('logs research start and success', async () => {\n>217:       const mockLogger = createMockLogger();\n 218:       const loggingAdapter = new GlmAdapter('test-key', LlmModels.Glm47, 'user-id', testPricing, mockLogger);\n 219:       mockResearch.mockResolvedValue({"},{"type":"typecheck","code":"TS2304","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":237,"message":"Cannot find name 'createMockLogger'.","snippet":"const mockLogger = createMockLogger();","context":" 235: \n 236:     it('logs research failure', async () => {\n>237:       const mockLogger = createMockLogger();\n 238:       const loggingAdapter = new GlmAdapter('test-key', LlmModels.Glm47, 'user-id', testPricing, mockLogger);\n 239:       mockResearch.mockResolvedValue({"},{"type":"typecheck","code":"TS2304","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":339,"message":"Cannot find name 'createMockLogger'.","snippet":"const mockLogger = createMockLogger();","context":" 337:     it('logs synthesis start and success', async () => {\n 338:       (mockBuildSynthesisPrompt as ReturnType<typeof vi.fn> & { mockReturnValue: (val: string) => void }).mockReturnValue('Synthesis: Prompt, Gemini, ');\n>339:       const mockLogger = createMockLogger();\n 340:       const loggingAdapter = new GlmAdapter('test-key', LlmModels.Glm47, 'user-id', testPricing, mockLogger);\n 341:       mockGenerate.mockResolvedValue({"},{"type":"typecheck","code":"TS2304","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":359,"message":"Cannot find name 'createMockLogger'.","snippet":"const mockLogger = createMockLogger();","context":" 357: \n 358:     it('logs synthesis failure', async () => {\n>359:       const mockLogger = createMockLogger();\n 360:       const loggingAdapter = new GlmAdapter('test-key', LlmModels.Glm47, 'user-id', testPricing, mockLogger);\n 361:       mockGenerate.mockResolvedValue({"},{"type":"typecheck","code":"TS2304","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":449,"message":"Cannot find name 'createMockLogger'.","snippet":"const mockLogger = createMockLogger();","context":" 447: \n 448:     it('logs title generation start and success', async () => {\n>449:       const mockLogger = createMockLogger();\n 450:       const loggingAdapter = new GlmAdapter('test-key', LlmModels.Glm47, 'user-id', testPricing, mockLogger);\n 451:       (mockTitlePrompt.build as ReturnType<typeof vi.fn> & { mockReturnValue: (val: string) => void }).mockReturnValue('Title prompt with Test');"},{"type":"typecheck","code":"TS2304","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":467,"message":"Cannot find name 'createMockLogger'.","snippet":"const mockLogger = createMockLogger();","context":" 465: \n 466:     it('logs title generation failure', async () => {\n>467:       const mockLogger = createMockLogger();\n 468:       const loggingAdapter = new GlmAdapter('test-key', LlmModels.Glm47, 'user-id', testPricing, mockLogger);\n 469:       (mockTitlePrompt.build as ReturnType<typeof vi.fn> & { mockReturnValue: (val: string) => void }).mockReturnValue('Title prompt with Test');"},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/GptAdapter.test.ts","line":6,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';","context":" 4: \n 5: import { beforeEach, describe, expect, it, vi } from 'vitest';\n>6: import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';\n 7: \n 8: const mockResearch = vi.fn();"},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/InputValidationAdapter.test.ts","line":2,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { LlmModels, type Logger } from '@intexuraos/llm-contract';","context":" 1: import { describe, it, expect, vi, beforeEach } from 'vitest';\n>2: import { LlmModels, type Logger } from '@intexuraos/llm-contract';\n 3: import { InputValidationAdapter } from '../../../infra/llm/InputValidationAdapter.js';\n 4: "},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":6,"message":"Module '\"@intexuraos/llm-pricing\"' has no exported member 'Logger'.","snippet":"import { TEST_PRICING, type Logger } from '@intexuraos/llm-pricing';","context":" 4: \n 5: import { describe, expect, it, vi } from 'vitest';\n>6: import { TEST_PRICING, type Logger } from '@intexuraos/llm-pricing';\n 7: import { LlmModels } from '@intexuraos/llm-contract';\n 8: "},{"type":"typecheck","code":"TS2305","file":"apps/research-agent/src/__tests__/infra/llm/PerplexityAdapter.test.ts","line":2,"message":"Module '\"@intexuraos/llm-contract\"' has no exported member 'Logger'.","snippet":"import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';","context":" 1: import { beforeEach, describe, expect, it, vi } from 'vitest';\n>2: import { type ModelPricing, LlmModels, type Logger } from '@intexuraos/llm-contract';\n 3: \n 4: const mockResearch = vi.fn();"},{"type":"typecheck","code":"TS2322","file":"apps/research-agent/src/domain/research/usecases/runSynthesis.ts","line":214,"message":"Type 'Logger' is not assignable to type '{ info: (msg: string) => void; error: (obj: object, msg: string) => void; }'.","snippet":"logger,","context":" 212:     const repairResult = await repairAttribution(synthesisContent, sourceMap, {\n 213:       synthesizer,\n>214:       logger,\n 215:     });\n 216: "},{"type":"typecheck","code":"TS2739","file":"apps/research-agent/src/routes/helpers/completionHandlers.ts","line":110,"message":"Type '{ info: (obj: object, msg?: string | undefined) => void; error: (obj: object, msg?: string | undefined) => void; }' is missing the following properties from type 'Logger': warn, debug","snippet":"logger: {","context":" 108:       void userServiceClient.reportLlmSuccess(userId, synthesisProvider);\n 109:     },\n>110:     logger: {\n 111:       info: (obj: object, msg?: string): void => {\n 112:         logger.info({ researchId, ...obj }, msg);"},{"type":"typecheck","code":"TS2739","file":"apps/research-agent/src/routes/internalRoutes.ts","line":357,"message":"Type '{ info: (obj: object, msg?: string | undefined) => void; error: (obj: object, msg?: string | undefined) => void; }' is missing the following properties from type 'Logger': warn, debug","snippet":"logger: {","context":" 355:               void userServiceClient.reportLlmSuccess(research.userId, synthesisProvider);\n 356:             },\n>357:             logger: {\n 358:               info: (obj: object, msg?: string): void => {\n 359:                 request.log.info({ researchId: event.researchId, ...obj }, msg);"},{"type":"typecheck","code":"TS2739","file":"apps/research-agent/src/routes/researchRoutes.ts","line":809,"message":"Type '{ info: (obj: object, msg?: string | undefined) => void; error: (obj: object, msg?: string | undefined) => void; }' is missing the following properties from type 'Logger': warn, debug","snippet":"logger: {","context":" 807:               void userServiceClient.reportLlmSuccess(user.userId, synthesisProvider);\n 808:             },\n>809:             logger: {\n 810:               info: (obj: object, msg?: string): void => {\n 811:                 request.log.info({ researchId: id, ...obj }, msg);"},{"type":"typecheck","code":"TS2741","file":"apps/research-agent/src/routes/researchRoutes.ts","line":942,"message":"Property 'logger' is missing in type '{ notificationSender: NotificationSender; shareStorage: ShareStoragePort | null; shareConfig: ShareConfig | null; imageServiceClient: ImageServiceClient | null; ... 5 more ...; synthesizer: LlmSynthesisProvider; }' but required in type 'Omit<RunSynthesisDeps, \"researchRepo\">'.","snippet":"synthesisDeps: {","context":" 940:         researchRepo,\n 941:         llmCallPublisher,\n>942:         synthesisDeps: {\n 943:           synthesizer,\n 944:           ...(contextInferrer !== undefined && { contextInferrer }),"},{"type":"typecheck","code":"TS2305","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":5,"message":"Module '\"@intexuraos/llm-factory\"' has no exported member 'Logger'.","snippet":"import type { LlmGenerateClient, Logger } from '@intexuraos/llm-factory';","context":" 3: import { createTodoItemExtractionService } from '../infra/gemini/todoItemExtractionService.js';\n 4: import type { UserServiceClient } from '../infra/user/userServiceClient.js';\n>5: import type { LlmGenerateClient, Logger } from '@intexuraos/llm-factory';\n 6: \n 7: const mockGenerate = vi.fn();"},{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
{"ts":"2026-01-15T10:36:20.134Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","runNumber":30,"passed":false,"durationMs":94636,"failureCount":19,"failures":[{"type":"typecheck","code":"TS2739","file":"apps/research-agent/src/__tests__/domain/research/usecases/repairAttribution.test.ts","line":65,"message":"Type 'MockLogger' is missing the following properties from type 'Logger': warn, debug","snippet":"logger,","context":" 63:     const result = await repairAttribution('Raw content without attribution', testSourceMap, {\n 64:       synthesizer: synthesizer as unknown as LlmSynthesisProvider,\n>65:       logger,\n 66:     });\n 67: "},{"type":"typecheck","code":"TS2739","file":"apps/research-agent/src/__tests__/domain/research/usecases/repairAttribution.test.ts","line":83,"message":"Type 'MockLogger' is missing the following properties from type 'Logger': warn, debug","snippet":"logger,","context":" 81:     const result = await repairAttribution('Raw content', [], {\n 82:       synthesizer: synthesizer as unknown as LlmSynthesisProvider,\n>83:       logger,\n 84:     });\n 85: "},{"type":"typecheck","code":"TS2739","file":"apps/research-agent/src/__tests__/domain/research/usecases/repairAttribution.test.ts","line":104,"message":"Type 'MockLogger' is missing the following properties from type 'Logger': warn, debug","snippet":"logger,","context":" 102:     const result = await repairAttribution('Raw content', testSourceMap, {\n 103:       synthesizer: synthesizer as unknown as LlmSynthesisProvider,\n>104:       logger,\n 105:     });\n 106: "},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/domain/research/usecases/retryFromFailed.test.ts","line":21,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 19:   warn: vi.fn(),\n 20:   debug: vi.fn(),\n>21:   trace: vi.fn(),\n 22:   fatal: vi.fn(),\n 23:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/domain/research/usecases/runSynthesis.test.ts","line":24,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 22:   warn: vi.fn(),\n 23:   debug: vi.fn(),\n>24:   trace: vi.fn(),\n 25:   fatal: vi.fn(),\n 26:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/ClaudeAdapter.test.ts","line":31,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 29:   warn: vi.fn(),\n 30:   debug: vi.fn(),\n>31:   trace: vi.fn(),\n 32:   fatal: vi.fn(),\n 33:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/GeminiAdapter.test.ts","line":35,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 33:   warn: vi.fn(),\n 34:   debug: vi.fn(),\n>35:   trace: vi.fn(),\n 36:   fatal: vi.fn(),\n 37:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/GlmAdapter.test.ts","line":46,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 44:   warn: vi.fn(),\n 45:   debug: vi.fn(),\n>46:   trace: vi.fn(),\n 47:   fatal: vi.fn(),\n 48:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/GptAdapter.test.ts","line":33,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 31:   warn: vi.fn(),\n 32:   debug: vi.fn(),\n>33:   trace: vi.fn(),\n 34:   fatal: vi.fn(),\n 35:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/InputValidationAdapter.test.ts","line":13,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 11:   warn: vi.fn(),\n 12:   debug: vi.fn(),\n>13:   trace: vi.fn(),\n 14:   fatal: vi.fn(),\n 15:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/LlmAdapterFactory.test.ts","line":17,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 15:   warn: vi.fn(),\n 16:   debug: vi.fn(),\n>17:   trace: vi.fn(),\n 18:   fatal: vi.fn(),\n 19:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/__tests__/infra/llm/PerplexityAdapter.test.ts","line":28,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 26:   warn: vi.fn(),\n 27:   debug: vi.fn(),\n>28:   trace: vi.fn(),\n 29:   fatal: vi.fn(),\n 30:   child: vi.fn().mockReturnThis(),"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/routes/helpers/completionHandlers.ts","line":125,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: (obj: object, msg?: string): void => {","context":" 123:         logger.debug({ researchId, ...obj }, msg);\n 124:       },\n>125:       trace: (obj: object, msg?: string): void => {\n 126:         logger.trace({ researchId, ...obj }, msg);\n 127:       },"},{"type":"typecheck","code":"TS2339","file":"apps/research-agent/src/routes/helpers/completionHandlers.ts","line":126,"message":"Property 'trace' does not exist on type 'Logger'.","snippet":"logger.trace({ researchId, ...obj }, msg);","context":" 124:       },\n 125:       trace: (obj: object, msg?: string): void => {\n>126:         logger.trace({ researchId, ...obj }, msg);\n 127:       },\n 128:       fatal: (obj: object, msg?: string): void => {"},{"type":"typecheck","code":"TS2339","file":"apps/research-agent/src/routes/helpers/completionHandlers.ts","line":129,"message":"Property 'fatal' does not exist on type 'Logger'.","snippet":"logger.fatal({ researchId, ...obj }, msg);","context":" 127:       },\n 128:       fatal: (obj: object, msg?: string): void => {\n>129:         logger.fatal({ researchId, ...obj }, msg);\n 130:       },\n 131:       child: (): typeof logger => logger,"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/routes/internalRoutes.ts","line":372,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: (obj: object, msg?: string): void => {","context":" 370:                 request.log.debug({ researchId: event.researchId, ...obj }, msg);\n 371:               },\n>372:               trace: (obj: object, msg?: string): void => {\n 373:                 request.log.trace({ researchId: event.researchId, ...obj }, msg);\n 374:               },"},{"type":"typecheck","code":"TS2353","file":"apps/research-agent/src/routes/researchRoutes.ts","line":824,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: (obj: object, msg?: string): void => {","context":" 822:                 request.log.debug({ researchId: id, ...obj }, msg);\n 823:               },\n>824:               trace: (obj: object, msg?: string): void => {\n 825:                 request.log.trace({ researchId: id, ...obj }, msg);\n 826:               },"},{"type":"typecheck","code":"TS2353","file":"apps/todos-agent/src/__tests__/todoItemExtractionService.test.ts","line":15,"message":"Object literal may only specify known properties, and 'trace' does not exist in type 'Logger'.","snippet":"trace: vi.fn(),","context":" 13:   warn: vi.fn(),\n 14:   debug: vi.fn(),\n>15:   trace: vi.fn(),\n 16:   fatal: vi.fn(),\n 17:   child: vi.fn().mockReturnThis(),"},{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
{"ts":"2026-01-15T10:40:43.021Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","runNumber":31,"passed":false,"durationMs":146393,"failureCount":2,"failures":[{"type":"test","code":"TEST_FAIL","file":"apps/research-agent/src/__tests__/domain/research/usecases/runSynthesis.test.ts","line":0,"message":"runSynthesis > synthesis context inference > infers synthesis context when contextInferrer is provided","snippet":null,"context":null},{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
{"ts":"2026-01-15T10:45:32.419Z","project":"intexuraos-1","branch":"kontakt/pbu-55-refactor-make-logger-mandatory-in-commands-agent","runNumber":32,"passed":true,"durationMs":119434,"failureCount":0,"failures":[]}
