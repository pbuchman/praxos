{"ts":"2026-01-23T23:09:34.379Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"--","runNumber":1,"passed":false,"durationMs":715,"failureCount":0,"failures":[]}
{"ts":"2026-01-23T23:09:45.542Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"--","runNumber":2,"passed":false,"durationMs":316,"failureCount":0,"failures":[]}
{"ts":"2026-01-23T23:47:48.019Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"--","runNumber":3,"passed":false,"durationMs":310,"failureCount":0,"failures":[]}
{"ts":"2026-01-23T23:47:57.337Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":4,"passed":false,"durationMs":1930,"failureCount":17,"failures":[{"type":"typecheck","code":"TS2307","file":"src/index.ts","line":4,"message":"Cannot find module '@intexuraos/llm-pricing' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/index.ts","line":5,"message":"Cannot find module '@intexuraos/llm-contract' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/infra/pagesummary/buildSummaryRepairPrompt.ts","line":6,"message":"Cannot find module '@intexuraos/llm-common' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS6133","file":"src/infra/pagesummary/llmSummarizer.ts","line":7,"message":"'getErrorMessage' is declared but its value is never read.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/infra/pagesummary/llmSummarizer.ts","line":8,"message":"Cannot find module '@intexuraos/llm-factory' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS6133","file":"src/infra/pagesummary/parseSummaryResponse.ts","line":9,"message":"'createLlmParseError' is declared but its value is never read.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/infra/pagesummary/parseSummaryResponse.ts","line":11,"message":"Cannot find module '@intexuraos/llm-common' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS2322","file":"src/infra/pagesummary/parseSummaryResponse.ts","line":101,"message":"Type 'ParsedSummary' is not assignable to type 'Result<ParsedSummary, ParseError>'.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/infra/user/userServiceClient.ts","line":12,"message":"Cannot find module '@intexuraos/llm-factory' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/infra/user/userServiceClient.ts","line":19,"message":"Cannot find module '@intexuraos/llm-contract' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/infra/user/userServiceClient.ts","line":20,"message":"Cannot find module '@intexuraos/llm-pricing' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS2366","file":"src/infra/user/userServiceClient.ts","line":47,"message":"Function lacks ending return statement and return type does not include 'undefined'.","snippet":null,"context":null},{"type":"typecheck","code":"TS2379","file":"src/routes/internalRoutes.ts","line":215,"message":"Argument of type '{ url: string; maxSentences: number | undefined; maxReadingMinutes: number | undefined; }' is not assignable to parameter of type 'SummarizeOptions' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.","snippet":null,"context":null},{"type":"typecheck","code":"TS2307","file":"src/services.ts","line":10,"message":"Cannot find module '@intexuraos/llm-pricing' or its corresponding type declarations.","snippet":null,"context":null},{"type":"typecheck","code":"TS1308","file":"src/services.ts","line":33,"message":"'await' expressions are only allowed within async functions and at the top levels of modules.","snippet":null,"context":null},{"type":"typecheck","code":"TS1308","file":"src/services.ts","line":37,"message":"'await' expressions are only allowed within async functions and at the top levels of modules.","snippet":null,"context":null},{"type":"typecheck","code":"TS1308","file":"src/services.ts","line":40,"message":"'await' expressions are only allowed within async functions and at the top levels of modules.","snippet":null,"context":null}]}
{"ts":"2026-01-23T23:55:23.835Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"--","runNumber":5,"passed":false,"durationMs":318,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:00:47.216Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"--","runNumber":6,"passed":false,"durationMs":508,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:00:55.428Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":7,"passed":false,"durationMs":3515,"failureCount":35,"failures":[{"type":"typecheck","code":"TS2416","file":"apps/web-agent/src/__tests__/fakes.ts","line":120,"message":"Property 'generate' in type 'FakeLlmGenerateClient' is not assignable to the same property in base type 'LlmGenerateClient'.","snippet":"async generate(prompt: string): Promise<Result<{ content: string; usage: unknown }, LLMError>> {","context":" 118:   private generateCalls: string[] = [];\n 119: \n>120:   async generate(prompt: string): Promise<Result<{ content: string; usage: unknown }, LLMError>> {\n 121:     this.generateCalls.push(prompt);\n 122: "},{"type":"typecheck","code":"TS2322","file":"apps/web-agent/src/__tests__/fakes.ts","line":156,"message":"Type 'FakeLlmGenerateClient' is not assignable to type 'LlmGenerateClient'.","snippet":"private llmClient: LlmGenerateClient = new FakeLlmGenerateClient();","context":" 154: \n 155: export class FakeUserServiceClient implements UserServiceClient {\n>156:   private llmClient: LlmGenerateClient = new FakeLlmGenerateClient();\n 157:   private shouldFail = false;\n 158:   private failCode: UserServiceError['code'] = 'NO_API_KEY';"},{"type":"typecheck","code":"TS6192","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":2,"message":"All imports in import declaration are unused.","snippet":"import { ok, err } from '@intexuraos/common-core';","context":" 1: import { describe, expect, it, beforeEach, vi } from 'vitest';\n>2: import { ok, err } from '@intexuraos/common-core';\n 3: import type { LlmGenerateClient } from '@intexuraos/llm-factory';\n 4: import type { Logger } from 'pino';"},{"type":"typecheck","code":"TS6133","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":5,"message":"'PageSummary' is declared but its value is never read.","snippet":"import { createLlmSummarizer, type PageSummary, type PageSummaryError } from '../../../infra/pagesummary/llmSummarizer.js';","context":" 3: import type { LlmGenerateClient } from '@intexuraos/llm-factory';\n 4: import type { Logger } from 'pino';\n>5: import { createLlmSummarizer, type PageSummary, type PageSummaryError } from '../../../infra/pagesummary/llmSummarizer.js';\n 6: \n 7: class MockLlmGenerateClient implements LlmGenerateClient {"},{"type":"typecheck","code":"TS2416","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":16,"message":"Property 'generate' in type 'MockLlmGenerateClient' is not assignable to the same property in base type 'LlmGenerateClient'.","snippet":"async generate(_prompt: string): Promise<","context":" 14:   }\n 15: \n>16:   async generate(_prompt: string): Promise<\n 17:     { ok: true; content: string; usage: unknown } | { ok: false; error: { message: string } }\n 18:   > {"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":68,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 66:       llmClient.setResponses([{ ok: true, content: 'This is a clean summary.' }]);\n 67: \n>68:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 69: \n 70:       expect(result.ok).toBe(true);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":82,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 80:       llmClient.setResponses([{ ok: true, content: 'Summary text.' }]);\n 81: \n>82:       await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 83: \n 84:       const prompt = llmClient.getCallCount();"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":94,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"llmClient","context":" 92:         'content',\n 93:         { url: 'https://example.com', maxSentences: 10, maxReadingMinutes: 5 },\n>94:         llmClient\n 95:       );\n 96: "},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":104,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 102:       llmClient.setResponses([{ ok: true, content: longSummary }]);\n 103: \n>104:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 105: \n 106:       expect(result.ok).toBe(true);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":117,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 115:       llmClient.setResponses([{ ok: false, error: 'Rate limit exceeded' }]);\n 116: \n>117:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 118: \n 119:       expect(result.ok).toBe(false);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":135,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 133:       ]);\n 134: \n>135:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 136: \n 137:       expect(result.ok).toBe(true);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":150,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 148:       ]);\n 149: \n>150:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 151: \n 152:       expect(result.ok).toBe(true);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":165,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 163:       ]);\n 164: \n>165:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 166: \n 167:       expect(result.ok).toBe(false);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":180,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 178:       ]);\n 179: \n>180:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 181: \n 182:       expect(result.ok).toBe(false);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":195,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 193:       ]);\n 194: \n>195:       const result = await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 196: \n 197:       expect(result.ok).toBe(false);"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":209,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 207:       llmClient.setResponses([{ ok: true, content: 'Summary text.' }]);\n 208: \n>209:       await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 210: \n 211:       expect(logger.info).toHaveBeenCalledWith("},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":228,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 226:       llmClient.setResponses([{ ok: false, error: 'API failure' }]);\n 227: \n>228:       await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 229: \n 230:       expect(logger.error).toHaveBeenCalled();"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":239,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 237:       ]);\n 238: \n>239:       await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 240: \n 241:       expect(logger.warn).toHaveBeenCalledWith("},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":253,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 251:       ]);\n 252: \n>253:       await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 254: \n 255:       expect(logger.info).toHaveBeenCalledWith("},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":269,"message":"Argument of type 'MockLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);","context":" 267:       ]);\n 268: \n>269:       await summarizer.summarize('content', { url: 'https://example.com' }, llmClient);\n 270: \n 271:       expect(logger.error).toHaveBeenCalledWith("},{"type":"typecheck","code":"TS6192","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":2,"message":"All imports in import declaration are unused.","snippet":"import { ok, err } from '@intexuraos/common-core';","context":" 1: import { describe, expect, it, beforeEach, vi } from 'vitest';\n>2: import { ok, err } from '@intexuraos/common-core';\n 3: import { createPageContentFetcher, type PageContentError } from '../../../infra/pagesummary/pageContentFetcher.js';\n 4: import type { Logger } from 'pino';"},{"type":"typecheck","code":"TS6133","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":3,"message":"'PageContentError' is declared but its value is never read.","snippet":"import { createPageContentFetcher, type PageContentError } from '../../../infra/pagesummary/pageContentFetcher.js';","context":" 1: import { describe, expect, it, beforeEach, vi } from 'vitest';\n 2: import { ok, err } from '@intexuraos/common-core';\n>3: import { createPageContentFetcher, type PageContentError } from '../../../infra/pagesummary/pageContentFetcher.js';\n 4: import type { Logger } from 'pino';\n 5: "},{"type":"typecheck","code":"TS18048","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":97,"message":"'callArgs' is possibly 'undefined'.","snippet":"expect(callArgs[0]).toBe('https://api.crawl4ai.com/v1/crawl');","context":" 95:       const callArgs = mockFetch.mock.calls[0];\n 96: \n>97:       expect(callArgs[0]).toBe('https://api.crawl4ai.com/v1/crawl');\n 98:       expect(callArgs[1]?.method).toBe('POST');\n 99: "},{"type":"typecheck","code":"TS18048","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":98,"message":"'callArgs' is possibly 'undefined'.","snippet":"expect(callArgs[1]?.method).toBe('POST');","context":" 96: \n 97:       expect(callArgs[0]).toBe('https://api.crawl4ai.com/v1/crawl');\n>98:       expect(callArgs[1]?.method).toBe('POST');\n 99: \n 100:       const payload = JSON.parse(callArgs[1]?.body as string);"},{"type":"typecheck","code":"TS18048","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":100,"message":"'callArgs' is possibly 'undefined'.","snippet":"const payload = JSON.parse(callArgs[1]?.body as string);","context":" 98:       expect(callArgs[1]?.method).toBe('POST');\n 99: \n>100:       const payload = JSON.parse(callArgs[1]?.body as string);\n 101:       expect(payload).toEqual({\n 102:         url: testUrl,"},{"type":"typecheck","code":"TS18048","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":121,"message":"'callArgs' is possibly 'undefined'.","snippet":"expect(callArgs[1]?.headers).toHaveProperty('X-API-Key', testApiKey);","context":" 119: \n 120:       const callArgs = mockFetch.mock.calls[0];\n>121:       expect(callArgs[1]?.headers).toHaveProperty('X-API-Key', testApiKey);\n 122:     });\n 123:   });"},{"type":"typecheck","code":"TS6133","file":"apps/web-agent/src/__tests__/infra/pagesummary/parseSummaryResponse.test.ts","line":2,"message":"'ParsedSummary' is declared but its value is never read.","snippet":"import { parseSummaryResponse, type ParsedSummary } from '../../../infra/pagesummary/parseSummaryResponse.js';","context":" 1: import { describe, expect, it } from 'vitest';\n>2: import { parseSummaryResponse, type ParsedSummary } from '../../../infra/pagesummary/parseSummaryResponse.js';\n 3: \n 4: describe('parseSummaryResponse', () => {"},{"type":"typecheck","code":"TS6133","file":"apps/web-agent/src/__tests__/infra/user/userServiceClient.test.ts","line":11,"message":"'logger' is declared but its value is never read.","snippet":"let logger: Logger;","context":" 9: \n 10: describe('UserServiceClient', () => {\n>11:   let logger: Logger;\n 12:   let mockPricingContext: IPricingContext;\n 13:   const baseUrl = 'http://localhost:8110';"},{"type":"typecheck","code":"TS2304","file":"apps/web-agent/src/__tests__/infra/user/userServiceClient.test.ts","line":11,"message":"Cannot find name 'Logger'.","snippet":"let logger: Logger;","context":" 9: \n 10: describe('UserServiceClient', () => {\n>11:   let logger: Logger;\n 12:   let mockPricingContext: IPricingContext;\n 13:   const baseUrl = 'http://localhost:8110';"},{"type":"typecheck","code":"TS2304","file":"apps/web-agent/src/__tests__/infra/user/userServiceClient.test.ts","line":23,"message":"Cannot find name 'Logger'.","snippet":"} as unknown as Logger;","context":" 21:       error: vi.fn(),\n 22:       debug: vi.fn(),\n>23:     } as unknown as Logger;\n 24: \n 25:     mockPricingContext = {"},{"type":"typecheck","code":"TS2322","file":"apps/web-agent/src/__tests__/infra/user/userServiceClient.test.ts","line":26,"message":"Type 'Mock<() => { inputCostPer1kTokens: number; outputCostPer1kTokens: number; }>' is not assignable to type '(model: LLMModel) => ModelPricing'.","snippet":"getPricing: vi.fn(() => ({","context":" 24: \n 25:     mockPricingContext = {\n>26:       getPricing: vi.fn(() => ({\n 27:         inputCostPer1kTokens: 0.001,\n 28:         outputCostPer1kTokens: 0.002,"},{"type":"typecheck","code":"TS2345","file":"apps/web-agent/src/__tests__/internalRoutes.test.ts","line":684,"message":"Argument of type 'FakeLlmGenerateClient' is not assignable to parameter of type 'LlmGenerateClient'.","snippet":"fakeUserService.setLlmClient(fakeLlm);","context":" 682: \n 683:       const fakeUserService = new FakeUserServiceClient();\n>684:       fakeUserService.setLlmClient(fakeLlm);\n 685: \n 686:       setServices({"},{"type":"typecheck","code":"TS2739","file":"apps/web-agent/src/__tests__/services.test.ts","line":33,"message":"Type '{ getPricing: Mock<() => { inputCostPer1kTokens: number; outputCostPer1kTokens: number; }>; }' is missing the following properties from type 'IPricingContext': hasPricing, validateModels, validateAllModels, getModelsWithPricing","snippet":"pricingContext: mockPricingContext,","context":" 31:         userServiceUrl: 'http://localhost:8110',\n 32:         internalAuthToken: 'test-token',\n>33:         pricingContext: mockPricingContext,\n 34:       });\n 35: "},{"type":"typecheck","code":"TS2739","file":"apps/web-agent/src/__tests__/services.test.ts","line":63,"message":"Type '{ getPricing: Mock<() => { inputCostPer1kTokens: number; outputCostPer1kTokens: number; }>; }' is missing the following properties from type 'IPricingContext': hasPricing, validateModels, validateAllModels, getModelsWithPricing","snippet":"pricingContext: mockPricingContext,","context":" 61:         userServiceUrl: 'http://localhost:8110',\n 62:         internalAuthToken: 'test-token',\n>63:         pricingContext: mockPricingContext,\n 64:       });\n 65: "},{"type":"typecheck","code":"TS2739","file":"apps/web-agent/src/__tests__/services.test.ts","line":99,"message":"Type '{ getPricing: Mock<() => { inputCostPer1kTokens: number; outputCostPer1kTokens: number; }>; }' is missing the following properties from type 'IPricingContext': hasPricing, validateModels, validateAllModels, getModelsWithPricing","snippet":"pricingContext: mockPricingContext,","context":" 97:         userServiceUrl: 'http://localhost:8110',\n 98:         internalAuthToken: 'test-token',\n>99:         pricingContext: mockPricingContext,\n 100:       });\n 101:       resetServices();"}]}
{"ts":"2026-01-24T00:04:27.820Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":8,"passed":false,"durationMs":41971,"failureCount":13,"failures":[{"type":"lint","code":"@typescript-eslint/array-type","file":"apps/web-agent/src/__tests__/fakes.ts","line":238,"message":"Array type using 'Array<T>' is forbidden. Use 'T[]' instead","snippet":"private summarizeCalls: Array<{ content: string; options: SummarizeOptions }> = [];","context":" 236:   private summary = 'This is a clean summary.';\n 237:   private shouldFail = false;\n>238:   private summarizeCalls: Array<{ content: string; options: SummarizeOptions }> = [];\n 239: \n 240:   async summarize("},{"type":"lint","code":"@typescript-eslint/array-type","file":"apps/web-agent/src/__tests__/fakes.ts","line":270,"message":"Array type using 'Array<T>' is forbidden. Use 'T[]' instead","snippet":"getSummarizeCalls(): Array<{ content: string; options: SummarizeOptions }> {","context":" 268:   }\n 269: \n>270:   getSummarizeCalls(): Array<{ content: string; options: SummarizeOptions }> {\n 271:     return this.summarizeCalls;\n 272:   }"},{"type":"lint","code":"@typescript-eslint/array-type","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":8,"message":"Array type using 'Array<T>' is forbidden. Use 'T[]' instead","snippet":"private responses: Array<{ ok: boolean; content?: string; error?: string }> = [];","context":" 6: \n 7: class MockLlmGenerateClient implements LlmGenerateClient {\n>8:   private responses: Array<{ ok: boolean; content?: string; error?: string }> = [];\n 9:   private callCount = 0;\n 10: "},{"type":"lint","code":"@typescript-eslint/array-type","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":11,"message":"Array type using 'Array<T>' is forbidden. Use 'T[]' instead","snippet":"setResponses(responses: Array<{ ok: boolean; content?: string; error?: string }>): void {","context":" 9:   private callCount = 0;\n 10: \n>11:   setResponses(responses: Array<{ ok: boolean; content?: string; error?: string }>): void {\n 12:     this.responses = responses;\n 13:     this.callCount = 0;"},{"type":"lint","code":"@typescript-eslint/explicit-function-return-type","file":"apps/web-agent/src/__tests__/internalRoutes.test.ts","line":676,"message":"Missing return type on function","snippet":"fakeLlm.generate = async () => {","context":" 674:       let callCount = 0;\n 675:       const mockUsage = { inputTokens: 100, outputTokens: 50, totalTokens: 150, costUsd: 0.001 };\n>676:       fakeLlm.generate = async () => {\n 677:         callCount++;\n 678:         if (callCount === 1) {"},{"type":"lint","code":"@typescript-eslint/no-deprecated","file":"apps/web-agent/src/infra/pagesummary/llmSummarizer.ts","line":67,"message":"`buildSummaryRepairPrompt` is deprecated. Use `summaryRepairPrompt.build()` directly for better type safety","snippet":"const repairPrompt = buildSummaryRepairPrompt(originalContent, invalidResponse, parseError.message);","context":" 65:   );\n 66: \n>67:   const repairPrompt = buildSummaryRepairPrompt(originalContent, invalidResponse, parseError.message);\n 68: \n 69:   const repairResult = await llmClient.generate(repairPrompt);"},{"type":"lint","code":"@typescript-eslint/no-deprecated","file":"apps/web-agent/src/infra/pagesummary/llmSummarizer.ts","line":135,"message":"`buildSummaryPrompt` is deprecated. Use `summaryPrompt.build()` directly for better type safety","snippet":"const prompt = buildSummaryPrompt(maxSentences, maxReadingMinutes);","context":" 133: \n 134:       // Build prompt and append content\n>135:       const prompt = buildSummaryPrompt(maxSentences, maxReadingMinutes);\n 136:       const fullPrompt = `${prompt}\\n\\nContent to summarize:\\n${content}`;\n 137: "},{"type":"lint","code":"no-restricted-syntax","file":"apps/web-agent/src/infra/pagesummary/parseSummaryResponse.ts","line":95,"message":"Logger parameter must be required (logger: Logger), not optional (logger?: Logger). Logger must be injected via dependency injection","snippet":"logger?: Logger","context":" 93: export function parseSummaryResponse(\n 94:   content: string,\n>95:   logger?: Logger\n 96: ): Result<ParsedSummary, ParseError> {\n 97:   try {"},{"type":"lint","code":"no-restricted-syntax","file":"apps/web-agent/src/infra/pagesummary/parseSummaryResponse.ts","line":100,"message":"Use getErrorMessage(error, fallback) from @intexuraos/common-core instead of inline error extraction","snippet":"const errorMessage = error instanceof Error ? error.message : String(error);","context":" 98:     return ok(parseSummaryResponseInternal(content));\n 99:   } catch (error) {\n>100:     const errorMessage = error instanceof Error ? error.message : String(error);\n 101: \n 102:     // Use llm-common pattern for detailed error messages"},{"type":"lint","code":"@typescript-eslint/only-throw-error","file":"apps/web-agent/src/infra/pagesummary/parseSummaryResponse.ts","line":145,"message":"Expected an error object to be thrown","snippet":"throw {","context":" 143:   // Step 2: Validate not empty\n 144:   if (cleaned.length === 0) {\n>145:     throw {\n 146:       code: 'EMPTY',\n 147:       message: 'Summary is empty after cleaning',"},{"type":"lint","code":"@typescript-eslint/only-throw-error","file":"apps/web-agent/src/infra/pagesummary/parseSummaryResponse.ts","line":154,"message":"Expected an error object to be thrown","snippet":"throw {","context":" 152:   if (cleaned.startsWith('[') || cleaned.startsWith('{')) {\n 153:     if (isValidJson(cleaned)) {\n>154:       throw {\n 155:         code: 'JSON_FORMAT',\n 156:         message: 'Response is JSON format - expected prose text',"},{"type":"lint","code":"@typescript-eslint/only-throw-error","file":"apps/web-agent/src/infra/pagesummary/parseSummaryResponse.ts","line":167,"message":"Expected an error object to be thrown","snippet":"throw {","context":" 165:   // Step 5: Validate not empty after stripping\n 166:   if (finalContent.length === 0) {\n>167:     throw {\n 168:       code: 'EMPTY',\n 169:       message: 'Summary is empty after stripping prefixes',"},{"type":"lint","code":"no-restricted-syntax","file":"apps/web-agent/src/infra/pagesummary/parseSummaryResponse.ts","line":189,"message":"Use getErrorMessage(error, fallback) from @intexuraos/common-core instead of inline error extraction","snippet":"const errorMessage = error instanceof Error ? error.message : String(error);","context":" 187:     return ok(parseSummaryResponseInternal(content));\n 188:   } catch (error) {\n>189:     const errorMessage = error instanceof Error ? error.message : String(error);\n 190: \n 191:     const detailedMessage = createDetailedParseErrorMessage({"}]}
{"ts":"2026-01-24T00:06:51.963Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":9,"passed":false,"durationMs":34120,"failureCount":5,"failures":[{"type":"test","code":"TEST_FAIL","file":"apps/bookmarks-agent/src/__tests__/infra/summary/webAgentSummaryClient.test.ts","line":0,"message":"webAgentSummaryClient > generateSummary > sends correct request body","snippet":null,"context":null},{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/pagesummary/llmSummarizer.test.ts","line":0,"message":"LlmSummarizer > logging > logs warning when attempting repair","snippet":null,"context":null},{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":0,"message":"PageContentFetcher > error handling - timeout > returns TIMEOUT on AbortError","snippet":null,"context":null},{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/pagesummary/parseSummaryResponse.test.ts","line":0,"message":"parseSummaryResponse > valid summaries > handles multi-sentence summaries","snippet":null,"context":null},{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/user/userServiceClient.test.ts","line":0,"message":"UserServiceClient > success path > fetches user settings and API key, creates LLM client","snippet":null,"context":null}]}
{"ts":"2026-01-24T00:10:11.297Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":10,"passed":false,"durationMs":33547,"failureCount":3,"failures":[{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/pagesummary/pageContentFetcher.test.ts","line":0,"message":"PageContentFetcher > error handling - timeout > returns TIMEOUT on AbortError","snippet":null,"context":null},{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/pagesummary/parseSummaryResponse.test.ts","line":0,"message":"parseSummaryResponse > combined scenarios > handles summary with prefix and markdown","snippet":null,"context":null},{"type":"test","code":"TEST_FAIL","file":"apps/web-agent/src/__tests__/infra/user/userServiceClient.test.ts","line":0,"message":"UserServiceClient > pricing integration > passes pricing to LLM client","snippet":null,"context":null}]}
{"ts":"2026-01-24T00:12:36.100Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"--","runNumber":11,"passed":false,"durationMs":302,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:13:13.272Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":12,"passed":true,"durationMs":32611,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:14:01.806Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"bookmarks-agent","runNumber":13,"passed":true,"durationMs":38513,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:16:45.242Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","runNumber":14,"passed":false,"durationMs":14873,"failureCount":1,"failures":[{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
{"ts":"2026-01-24T00:19:42.877Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","runNumber":15,"passed":false,"durationMs":50807,"failureCount":2,"failures":[{"type":"typecheck","code":"TS6133","file":"apps/web-agent/src/infra/user/userServiceClient.ts","line":17,"message":"'LlmProviders' is declared but its value is never read.","snippet":"LlmProviders,","context":" 15:   isValidModel,\n 16:   LlmModels,\n>17:   LlmProviders,\n 18:   type LlmProvider,\n 19: } from '@intexuraos/llm-contract';"},{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
{"ts":"2026-01-24T00:21:31.880Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","runNumber":16,"passed":true,"durationMs":97686,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:24:31.799Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","workspace":"web-agent","runNumber":17,"passed":true,"durationMs":33709,"failureCount":0,"failures":[]}
{"ts":"2026-01-24T00:27:13.666Z","project":"intexuraos-2","branch":"fix/INT-213-ai-summary-raw-json","runNumber":18,"passed":true,"durationMs":102470,"failureCount":0,"failures":[]}
