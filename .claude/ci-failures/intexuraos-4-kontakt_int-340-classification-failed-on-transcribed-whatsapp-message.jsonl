{"ts":"2026-01-26T02:30:14.395Z","project":"intexuraos-4","branch":"kontakt/int-340-classification-failed-on-transcribed-whatsapp-message","runNumber":1,"passed":false,"durationMs":75274,"failureCount":26,"failures":[{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/__tests__/openapi-contract.test.ts","line":2,"message":"Cannot find module 'fastify' or its corresponding type declarations.","snippet":"import type { FastifyInstance } from 'fastify';","context":" 1: import { afterAll, beforeAll, describe, expect, it } from 'vitest';\n>2: import type { FastifyInstance } from 'fastify';\n 3: import { buildServer } from '../server.js';\n 4: "},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/__tests__/testUtils.ts","line":6,"message":"Cannot find module 'fastify' or its corresponding type declarations.","snippet":"import Fastify, { type FastifyInstance } from 'fastify';","context":" 4:  */\n 5: import { afterAll, afterEach, beforeAll, beforeEach, describe, expect, it } from 'vitest';\n>6: import Fastify, { type FastifyInstance } from 'fastify';\n 7: import * as jose from 'jose';\n 8: import { buildServer } from '../server.js';"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/__tests__/testUtils.ts","line":61,"message":"Parameter '_req' implicitly has an 'any' type.","snippet":"jwksServer.get('/.well-known/jwks.json', async (_req, reply) => {","context":" 59:   jwksServer = Fastify({ logger: false });\n 60: \n>61:   jwksServer.get('/.well-known/jwks.json', async (_req, reply) => {\n 62:     return await reply.send({ keys: [publicKeyJwk] });\n 63:   });"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/routes/index.ts","line":6,"message":"Cannot find module 'fastify' or its corresponding type declarations.","snippet":"import type { FastifyPluginCallback } from 'fastify';","context":" 4:  */\n 5: \n>6: import type { FastifyPluginCallback } from 'fastify';\n 7: import { promptRoutes } from './promptRoutes.js';\n 8: "},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/index.ts","line":9,"message":"Parameter 'fastify' implicitly has an 'any' type.","snippet":"export const promptVaultRoutes: FastifyPluginCallback = (fastify, _opts, done) => {","context":" 7: import { promptRoutes } from './promptRoutes.js';\n 8: \n>9: export const promptVaultRoutes: FastifyPluginCallback = (fastify, _opts, done) => {\n 10:   fastify.register(promptRoutes);\n 11:   done();"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":11,"message":"Cannot find module 'fastify' or its corresponding type declarations.","snippet":"import type { FastifyPluginCallback } from 'fastify';","context":" 9:  */\n 10: \n>11: import type { FastifyPluginCallback } from 'fastify';\n 12: import { handleValidationError, logIncomingRequest, requireAuth } from '@intexuraos/common-http';\n 13: import { createPrompt, getPrompt, listPrompts, updatePrompt } from '../domain/promptvault/index.js';"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":18,"message":"Parameter 'fastify' implicitly has an 'any' type.","snippet":"export const promptRoutes: FastifyPluginCallback = (fastify, _opts, done) => {","context":" 16: import { mapDomainErrorCode } from './shared.js';\n 17: \n>18: export const promptRoutes: FastifyPluginCallback = (fastify, _opts, done) => {\n 19:   // GET /prompt-vault/main-page\n 20:   fastify.get("},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":73,"message":"Parameter 'request' implicitly has an 'any' type.","snippet":"async (request, reply) => {","context":" 71:       },\n 72:     },\n>73:     async (request, reply) => {\n 74:       const user = await requireAuth(request, reply);\n 75:       if (user === null) return;"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":184,"message":"Parameter 'request' implicitly has an 'any' type.","snippet":"async (request, reply) => {","context":" 182:       },\n 183:     },\n>184:     async (request, reply) => {\n 185:       logIncomingRequest(request, {\n 186:         message: 'Received request to GET /prompt-vault/prompts',"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":278,"message":"Parameter 'request' implicitly has an 'any' type.","snippet":"async (request, reply) => {","context":" 276:       },\n 277:     },\n>278:     async (request, reply) => {\n 279:       logIncomingRequest(request, {\n 280:         message: 'Received request to POST /prompt-vault/prompts',"},{"type":"typecheck","code":"TS2347","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":320,"message":"Untyped function calls may not accept type arguments.","snippet":"fastify.get<{ Params: { prompt_id: string } }>(","context":" 318: \n 319:   // GET /prompt-vault/prompts/:prompt_id - Get a single prompt\n>320:   fastify.get<{ Params: { prompt_id: string } }>(\n 321:     '/prompt-vault/prompts/:prompt_id',\n 322:     {"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":390,"message":"Parameter 'request' implicitly has an 'any' type.","snippet":"async (request, reply) => {","context":" 388:       },\n 389:     },\n>390:     async (request, reply) => {\n 391:       logIncomingRequest(request, {\n 392:         message: 'Received request to GET /prompt-vault/prompts/:prompt_id',"},{"type":"typecheck","code":"TS2347","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":424,"message":"Untyped function calls may not accept type arguments.","snippet":"fastify.patch<{ Params: { prompt_id: string } }>(","context":" 422: \n 423:   // PATCH /prompt-vault/prompts/:prompt_id - Update a prompt\n>424:   fastify.patch<{ Params: { prompt_id: string } }>(\n 425:     '/prompt-vault/prompts/:prompt_id',\n 426:     {"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/promptRoutes.ts","line":505,"message":"Parameter 'request' implicitly has an 'any' type.","snippet":"async (request, reply) => {","context":" 503:       },\n 504:     },\n>505:     async (request, reply) => {\n 506:       logIncomingRequest(request, {\n 507:         message: 'Received request to PATCH /prompt-vault/prompts/:prompt_id',"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/routes/schemas.ts","line":1,"message":"Cannot find module 'zod' or its corresponding type declarations.","snippet":"import { z } from 'zod';","context":">1: import { z } from 'zod';\n 2: \n 3: /**"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/routes/schemas.ts","line":43,"message":"Parameter 'data' implicitly has an 'any' type.","snippet":".refine((data) => data.title !== undefined || data.prompt !== undefined, {","context":" 41:   })\n 42:   .strict()\n>43:   .refine((data) => data.title !== undefined || data.prompt !== undefined, {\n 44:     message: 'at least one of title or prompt must be provided',\n 45:     path: [],"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/server.ts","line":1,"message":"Cannot find module 'fastify' or its corresponding type declarations.","snippet":"import Fastify, { type FastifyInstance } from 'fastify';","context":">1: import Fastify, { type FastifyInstance } from 'fastify';\n 2: import pino from 'pino';\n 3: import type { FastifyDynamicSwaggerOptions } from '@fastify/swagger';"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/server.ts","line":2,"message":"Cannot find module 'pino' or its corresponding type declarations.","snippet":"import pino from 'pino';","context":" 1: import Fastify, { type FastifyInstance } from 'fastify';\n>2: import pino from 'pino';\n 3: import type { FastifyDynamicSwaggerOptions } from '@fastify/swagger';\n 4: import fastifySwagger from '@fastify/swagger';"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/server.ts","line":3,"message":"Cannot find module '@fastify/swagger' or its corresponding type declarations.","snippet":"import type { FastifyDynamicSwaggerOptions } from '@fastify/swagger';","context":" 1: import Fastify, { type FastifyInstance } from 'fastify';\n 2: import pino from 'pino';\n>3: import type { FastifyDynamicSwaggerOptions } from '@fastify/swagger';\n 4: import fastifySwagger from '@fastify/swagger';\n 5: import fastifySwaggerUi from '@fastify/swagger-ui';"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/server.ts","line":4,"message":"Cannot find module '@fastify/swagger' or its corresponding type declarations.","snippet":"import fastifySwagger from '@fastify/swagger';","context":" 2: import pino from 'pino';\n 3: import type { FastifyDynamicSwaggerOptions } from '@fastify/swagger';\n>4: import fastifySwagger from '@fastify/swagger';\n 5: import fastifySwaggerUi from '@fastify/swagger-ui';\n 6: import fastifyCors from '@fastify/cors';"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/server.ts","line":5,"message":"Cannot find module '@fastify/swagger-ui' or its corresponding type declarations.","snippet":"import fastifySwaggerUi from '@fastify/swagger-ui';","context":" 3: import type { FastifyDynamicSwaggerOptions } from '@fastify/swagger';\n 4: import fastifySwagger from '@fastify/swagger';\n>5: import fastifySwaggerUi from '@fastify/swagger-ui';\n 6: import fastifyCors from '@fastify/cors';\n 7: import {"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/server.ts","line":6,"message":"Cannot find module '@fastify/cors' or its corresponding type declarations.","snippet":"import fastifyCors from '@fastify/cors';","context":" 4: import fastifySwagger from '@fastify/swagger';\n 5: import fastifySwaggerUi from '@fastify/swagger-ui';\n>6: import fastifyCors from '@fastify/cors';\n 7: import {\n 8:   fastifyAuthPlugin,"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/server.ts","line":434,"message":"Parameter '_req' implicitly has an 'any' type.","snippet":"async (_req, reply) => {","context":" 432:       },\n 433:     },\n>434:     async (_req, reply) => {\n 435:       const spec = app.swagger();\n 436:       return await reply.type('application/json').send(spec);"},{"type":"typecheck","code":"TS7006","file":"apps/promptvault-service/src/server.ts","line":477,"message":"Parameter '_req' implicitly has an 'any' type.","snippet":"async (_req, reply) => {","context":" 475:       },\n 476:     },\n>477:     async (_req, reply) => {\n 478:       const started = Date.now();\n 479:       const firestoreCheck = await checkFirestore();"},{"type":"typecheck","code":"TS2307","file":"apps/promptvault-service/src/services.ts","line":6,"message":"Cannot find module 'pino' or its corresponding type declarations.","snippet":"import pino from 'pino';","context":" 4:  */\n 5: import type { Result } from '@intexuraos/common-core';\n>6: import pino from 'pino';\n 7: import {\n 8:   type NotionLogger,"},{"type":"verify","code":"VERIFY_FAIL","file":"unknown","line":0,"message":"FAILED","snippet":null,"context":null}]}
